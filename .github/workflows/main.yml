name: Discord

on: 
  push:
    branches: [main]

jobs:
  react_on_push:
    runs-on: ubuntu-latest
    steps:
      - name: Prepare message
        id: vars
        run: |
          SHORT_SHA=${GITHUB_SHA::7}
          echo "MSG=ðŸ§‘â€ðŸ’» **${{ github.actor }}** has pushed to **Branch: ${{ github.ref_name }}**\nðŸ’¬ Commit: ${{ github.event.head_commit.message }}\nðŸ”— [Show commit](https://github.com/${GITHUB_REPOSITORY}/commit/${GITHUB_SHA})\nðŸ“¦ SHA: \`${SHORT_SHA}\`" >> $GITHUB_ENV
    
      - name: Send message
        uses: sebastianpopp/discord-action@releases/v2
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK }}
          message: '${{ env.MSG }}'
